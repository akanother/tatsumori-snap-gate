import u from"./BaseKpiCard-CgfSCTnv.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as g,f as a,o as r,a as p,w as _,b as s,h as m,t as o,e as d,m as i}from"./app-DNec1a2P.js";const b={name:"OverdueDeliveryBucketsPanel",components:{BaseKpiCard:u},data(){return{loading:!0,w1:0,w2:0,w4:0,lastUpdated:null,error:null}},mounted(){this.fetchBuckets()},computed:{total(){return this.w1+this.w2+this.w4},p1(){return this.total?Math.round(this.w1/this.total*100):0},p2(){return this.total?Math.round(this.w2/this.total*100):0},p4(){return this.total?Math.round(this.w4/this.total*100):0}},methods:{async fetchBuckets(){this.loading=!0,this.error=null;try{const{data:e}=await axios.get(route("api.dashboard.overdue.buckets"));this.w1=(e==null?void 0:e.w1)??0,this.w2=(e==null?void 0:e.w2)??0,this.w4=(e==null?void 0:e.w4)??0,this.lastUpdated=new Date}catch(e){console.error(e),this.error="読み込みに失敗しました"}finally{this.loading=!1}}}},f={class:"col-sm-3"},w={class:"fw-bold mb-0 bg-danger rounded-lg p-2"},k={key:0,class:"display-5 text-white"},y={key:1,class:"fs-3"},v={key:0,class:"w-100"},x={class:"d-flex justify-content-between align-items-center"},B={class:"badge",style:{background:"rgba(251,192,45,.15)",color:"#b28704"}},C={class:"text-danger ml-2"},U={class:"progress my-1",style:{height:"5px"}},N={class:"d-flex justify-content-between align-items-center mt-1"},V={class:"badge",style:{background:"rgba(255,159,67,.15)",color:"#b36a00"}},j={class:"text-danger ml-2"},D={class:"progress my-1",style:{height:"5px"}},K={class:"d-flex justify-content-between align-items-center mt-1"},M={class:"badge",style:{background:"rgba(239,83,80,.15)",color:"#b21f2d"}},O={class:"text-danger ml-2"},P={class:"progress my-1",style:{height:"5px"}},R={key:1,class:"w-100"},S={key:2,class:"text-danger small mt-1"};function z(e,t,E,I,l,n){const c=g("BaseKpiCard");return r(),a("div",f,[p(c,{title:"納期超過（受注）",loading:l.loading,lastUpdated:l.lastUpdated,icon:"mdi mdi-calendar-alert",onRefresh:n.fetchBuckets},{default:_(()=>[s("div",w,[l.loading?(r(),a("span",y,"...")):(r(),a("h4",k,o(n.total)+"件",1))]),t[4]||(t[4]=s("div",{class:"w-100 my-2",style:{height:"1px",background:"rgba(0,0,0,.06)"}},null,-1)),l.loading?(r(),a("div",R,t[3]||(t[3]=[s("div",{class:"skeleton skeleton-line"},null,-1),s("div",{class:"skeleton skeleton-bar"},null,-1),s("div",{class:"skeleton skeleton-line"},null,-1),s("div",{class:"skeleton skeleton-bar"},null,-1),s("div",{class:"skeleton skeleton-line"},null,-1),s("div",{class:"skeleton skeleton-bar"},null,-1)]))):(r(),a("div",v,[s("div",x,[t[0]||(t[0]=s("span",{class:"text-muted"},[s("span",{class:"dot",style:{background:"#fbc02d"}}),d("1〜7日")],-1)),s("span",null,[s("span",B,o(n.p1)+"%",1),s("strong",C,o(l.w1),1)])]),s("div",U,[s("div",{class:"progress-bar bg-warning",style:i({width:n.p1+"%"})},null,4)]),s("div",N,[t[1]||(t[1]=s("span",{class:"text-muted"},[s("span",{class:"dot",style:{background:"#ff9f43"}}),d("8〜14日")],-1)),s("span",null,[s("span",V,o(n.p2)+"%",1),s("strong",j,o(l.w2),1)])]),s("div",D,[s("div",{class:"progress-bar",style:i([{background:"#ff9f43"},{width:n.p2+"%"}])},null,4)]),s("div",K,[t[2]||(t[2]=s("span",{class:"text-muted"},[s("span",{class:"dot",style:{background:"#ef5350"}}),d("15〜30日")],-1)),s("span",null,[s("span",M,o(n.p4)+"%",1),s("strong",O,o(l.w4),1)])]),s("div",P,[s("div",{class:"progress-bar bg-danger",style:i({width:n.p4+"%"})},null,4)])])),l.error?(r(),a("div",S,o(l.error),1)):m("",!0)]),_:1,__:[4]},8,["loading","lastUpdated","onRefresh"])])}const F=h(b,[["render",z],["__scopeId","data-v-fec84961"]]);export{F as default};
